<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta name="generator" content="jemdoc, see http://jemdoc.jaboc.net/" />
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link rel="stylesheet" href="jemdoc.css" type="text/css" />
<title></title>
</head>
<body>
<table summary="Table for page layout." id="tlayout">
<tr valign="top">
<td id="layout-menu">
<div class="menu-item"><a href="index.html">Main</a></div>
<div class="menu-item"><a href="publications.html">Publications</a></div>
<div class="menu-category">Research</div>
<div class="menu-item"><a href="bsbl.html">BSBL</a></div>
<div class="menu-item"><a href="eit.html">EIT</a></div>
<div class="menu-category">Hacks</div>
<div class="menu-item"><a href="phealth.html" class="current">pHealth</a></div>
<div class="menu-item"><a href="radar.html">RADAR</a></div>
<div class="menu-item"><a href="nudtpaper.html">NUDTPaper</a></div>
<div class="menu-item"><a href="nrf51822.html">NRF51822</a></div>
</td>
<td id="layout-content">
<h1>Portable Healthcare : Hybrid Cardiography Monitoring via BLE</h1>
<p>Building a demo board to collect cardio-related bio-signals based on nrf51822-AK.</p>
<h2>pmodAD2 + Lx9micro + USB : building a 3-channel evaluation system</h2>
<p>先用中文夹杂英文做笔记 ：）</p>
<h3>pmodAD2</h3>
<p>pmodAD2, ad7991, I2C interface, up to 4 channels, 12-bit resolution. 要想使用vin4，需要disable REF_SEL，同时将JP1连接到vin4端口上。对于ad7991的操作通过I2C接口进行，主要配置哪几路AD用来转换，是否使用外部参考电压，是否有bit trial或sample delay。<b>We may use this module with nrf51822</b>.</p>
<p>ad7991 remains in shutdown mode, powering up only for conversions. The conversion process is controlled by a command mode. The range (when REF_SEL disabled) is 0V to VDD.</p>
<p>ad7991的串口时钟速率fSCL划分为standard (100K), fast (400K), high speed (3.4M)三种, VDD典型范围在2.7V到5.5V。ad7991的地址为 0101000 (0101001)，注意地址是7位的哦，外带一位的R<i>W位：如果R</i>W=0，则对ad7991发起写操作；如果R/W=1，则对ad7991发起读操作。对配置地址写入配置数据即可完成ad7991的配置。配置字可参见器件手册 Table 10.</p>
<p>一个操作的要点是，在ad7991进行采样的过程中 (busy) ， I2C总线不要发起请求。ad7991的转化结果包含2B数据，其中最高两位为0，后续两位为对应的所转化的通道数，后续12位（不足的低位补零）则包含ADC结果。关键的步骤是：</p>
<ol>
<li><p>SDA pulled low, and wake up device</p>
</li>
<li><p>写配置地址和配置寄存器</p>
</li>
<li><p>写配置地址和读转化结果</p>
</li>
<li><p>根据通道数目确定master的ACK种类</p>
</li>
</ol>
<div id="footer">
<div id="footer-text">
Page generated 2014-02-04 21:07:38 CST, by <a href="http://jemdoc.jaboc.net/">jemdoc</a>.
</div>
</div>
</td>
</tr>
</table>
</body>
</html>
